# hybrid-archi æ¨¡å—å…¨é¢è¯„ä¼°æŠ¥å‘Š

> **è¯„ä¼°æ—¥æœŸ**: 2025-01-27  
> **æœ€åæ›´æ–°**: 2025-01-27  
> **æ¨¡å—ç‰ˆæœ¬**: 0.0.1  
> **è¯„ä¼°äºº**: AI åŠ©æ‰‹  
> **æ›´æ–°è¯´æ˜**: å·²åŒæ­¥ CQRS Bus ç±»é‡å‘½å (Core*â†’*)

---

## ğŸ“‹ ç›®å½•

- [1. æ‰§è¡Œæ‘˜è¦](#1-æ‰§è¡Œæ‘˜è¦)
- [2. æ¶æ„è¯„ä¼°](#2-æ¶æ„è¯„ä¼°)
- [3. ä»£ç è´¨é‡è¯„ä¼°](#3-ä»£ç è´¨é‡è¯„ä¼°)
- [4. æ–‡æ¡£è¯„ä¼°](#4-æ–‡æ¡£è¯„ä¼°)
- [5. æµ‹è¯•è¯„ä¼°](#5-æµ‹è¯•è¯„ä¼°)
- [6. ä¾èµ–å…³ç³»è¯„ä¼°](#6-ä¾èµ–å…³ç³»è¯„ä¼°)
- [7. åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°](#7-åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°)
- [8. ä¼˜åŠ¿åˆ†æ](#8-ä¼˜åŠ¿åˆ†æ)
- [9. é—®é¢˜åˆ†æ](#9-é—®é¢˜åˆ†æ)
- [10. æ”¹è¿›å»ºè®®](#10-æ”¹è¿›å»ºè®®)
- [11. ä¼˜å…ˆçº§å»ºè®®](#11-ä¼˜å…ˆçº§å»ºè®®)

---

## 1. æ‰§è¡Œæ‘˜è¦

### 1.1 æ€»ä½“è¯„ä»·

**è¯„åˆ†**: â­â­â­â­â˜† (4/5)

`hybrid-archi` æ¨¡å—æ˜¯é¡¹ç›®çš„**æ ¸å¿ƒæ¶æ„åŸºç¡€æ¨¡å—**ï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒå®šä½ï¼š

> ğŸ¯ **æ ¸å¿ƒç›®æ ‡**ï¼šä¸ºä¸šåŠ¡æ¨¡å—çš„å¼€å‘æä¾›ç»Ÿä¸€çš„æ··åˆæ¶æ„è®¾è®¡æ¨¡å¼ï¼ŒåŒæ—¶æä¾›æ··åˆæ¶æ„æ‰€éœ€è¦çš„é€šç”¨åŠŸèƒ½ç»„ä»¶ï¼Œæ˜¯æ‰€æœ‰ä¸šåŠ¡æ¨¡å—çš„åŸºç¡€ã€‚

è¯¥æ¨¡å—æ•´ä½“æ¶æ„è®¾è®¡æ¸…æ™°ã€å®Œæ•´ï¼ŒæˆåŠŸå®ç°äº† Clean Architecture + DDD + CQRS + Event Sourcing + Event-Driven Architecture çš„æ··åˆæ¶æ„æ¨¡å¼ï¼Œä¸ºæ•´ä¸ª SAAS å¹³å°æä¾›äº†åšå®çš„æ¶æ„åŸºç¡€ã€‚

### 1.2 æ ¸å¿ƒä¼˜åŠ¿

âœ… **åŸºç¡€æ¶æ„å®šä½æ˜ç¡®**: ä½œä¸ºæ‰€æœ‰ä¸šåŠ¡æ¨¡å—çš„åŸºç¡€ï¼Œæä¾›ç»Ÿä¸€çš„æ¶æ„æ¨¡å¼å’Œé€šç”¨ç»„ä»¶  
âœ… **æ¶æ„è®¾è®¡å®Œæ•´**: å®ç°äº†å®Œæ•´çš„æ··åˆæ¶æ„æ¨¡å¼ï¼ˆClean Architecture + DDD + CQRS + ES + EDAï¼‰  
âœ… **åˆ†å±‚æ¸…æ™°**: é¢†åŸŸå±‚ã€åº”ç”¨å±‚ã€åŸºç¡€è®¾æ–½å±‚ã€æ¥å£å±‚èŒè´£æ˜ç¡®  
âœ… **é€šç”¨ç»„ä»¶ä¸°å¯Œ**: æä¾›å®Œæ•´çš„å®ä½“ã€èšåˆæ ¹ã€å€¼å¯¹è±¡ã€äº‹ä»¶ã€CQRS ç­‰åŸºç¡€ç»„ä»¶  
âœ… **æ³¨é‡Šè§„èŒƒ**: ä¸¥æ ¼éµå¾ª TSDoc è§„èŒƒï¼Œæ³¨é‡Šè¯¦ç»†ã€ä¸šåŠ¡è§„åˆ™æ¸…æ™°  
âœ… **ç±»å‹å®‰å…¨**: ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼ï¼Œç±»å‹ç³»ç»Ÿå®Œæ•´  
âœ… **å¸¸é‡ç®¡ç†**: é›†ä¸­ç®¡ç†å¸¸é‡ï¼Œé¿å…ç¡¬ç¼–ç   
âœ… **æµ‹è¯•è¦†ç›–**: åŒ…å«å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2E æµ‹è¯•

### 1.3 æ ¸å¿ƒé—®é¢˜

âš ï¸ **README ä¸å®Œæ•´**: ç¼ºå°‘è¯¦ç»†çš„æ¨¡å—ä»‹ç»å’Œä½¿ç”¨æ–‡æ¡£  
âš ï¸ **éƒ¨åˆ†åŠŸèƒ½æœªå®ç°**: æŸäº›é€‚é…å™¨å’Œå·¥å‚ç±»å¯èƒ½å°šæœªå®Œå…¨å®ç°  
âš ï¸ **æµ‹è¯•è¦†ç›–ç‡æœªçŸ¥**: æ— æ³•ç¡®è®¤å®é™…æµ‹è¯•è¦†ç›–ç‡  
âš ï¸ **ç¼ºå°‘å®é™…ç¤ºä¾‹**: ç¼ºå°‘å®Œæ•´çš„ç«¯åˆ°ç«¯ä½¿ç”¨ç¤ºä¾‹

---

## 2. æ¶æ„è¯„ä¼°

### 2.1 æ¨¡å—å®šä½ä¸èŒè´£ (è¯„åˆ†: â­â­â­â­â­)

**æ ¸å¿ƒå®šä½**:

> ğŸ“Œ **hybrid-archi æ˜¯æ•´ä¸ª SAAS å¹³å°çš„æ¶æ„åŸºçŸ³**
>
> - **ç»Ÿä¸€æ¶æ„æ¨¡å¼**: ä¸ºæ‰€æœ‰ä¸šåŠ¡æ¨¡å—æä¾›ç»Ÿä¸€çš„æ··åˆæ¶æ„è®¾è®¡æ¨¡å¼
> - **é€šç”¨åŠŸèƒ½ç»„ä»¶**: æä¾›æ··åˆæ¶æ„å¼€å‘æ‰€éœ€çš„å®Œæ•´é€šç”¨åŠŸèƒ½ç»„ä»¶
> - **ä¸šåŠ¡æ¨¡å—åŸºç¡€**: æ‰€æœ‰ä¸šåŠ¡æ¨¡å—å¿…é¡»åŸºäº hybrid-archi å¼€å‘
> - **æ¶æ„ä¸€è‡´æ€§ä¿éšœ**: ç¡®ä¿æ•´ä¸ªå¹³å°çš„æ¶æ„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§

**èŒè´£èŒƒå›´**:

1. **æä¾›åŸºç¡€æ¶æ„ç»„ä»¶**
   - BaseEntityã€BaseAggregateRootã€BaseValueObject
   - BaseDomainEventã€IDomainService
   - CQRS æ€»çº¿ï¼ˆCommandBusã€QueryBusã€EventBusã€CQRSBusï¼‰
   - ä»“å‚¨æ¥å£ã€ç«¯å£é€‚é…å™¨

2. **é›†æˆåŸºç¡€è®¾æ–½æ¨¡å—**
   - å¤šç§Ÿæˆ·ï¼ˆ@hl8/multi-tenancyï¼‰
   - ç¼“å­˜ï¼ˆ@hl8/cacheï¼‰
   - æ—¥å¿—ï¼ˆ@hl8/loggerï¼‰
   - é…ç½®ï¼ˆ@hl8/configï¼‰
   - æ•°æ®åº“ï¼ˆ@hl8/databaseï¼‰
   - æ¶ˆæ¯ï¼ˆ@hl8/messagingï¼‰
   - Web æ¡†æ¶ï¼ˆ@hl8/fastify-proï¼‰

3. **å®šä¹‰å¼€å‘è§„èŒƒ**
   - å……è¡€æ¨¡å‹å¼€å‘è§„èŒƒ
   - å®ä½“ä¸èšåˆæ ¹åˆ†ç¦»è§„èŒƒ
   - CQRS å¼€å‘è§„èŒƒ
   - äº‹ä»¶æº¯æºå¼€å‘è§„èŒƒ
   - å¤šç§Ÿæˆ·å¼€å‘è§„èŒƒ

### 2.2 æ¶æ„åˆ†å±‚ (è¯„åˆ†: â­â­â­â­â­)

**ä¼˜ç§€è¡¨ç°**:

```
packages/hybrid-archi/src/
â”œâ”€â”€ domain/          âœ… é¢†åŸŸå±‚ï¼šå®ä½“ã€èšåˆæ ¹ã€å€¼å¯¹è±¡ã€ä»“å‚¨æ¥å£
â”œâ”€â”€ application/     âœ… åº”ç”¨å±‚ï¼šç”¨ä¾‹ã€CQRSã€æœåŠ¡ã€ç«¯å£
â”œâ”€â”€ infrastructure/  âœ… åŸºç¡€è®¾æ–½å±‚ï¼šé€‚é…å™¨ã€å·¥å‚ã€äº‹ä»¶å­˜å‚¨ã€äº‹ä»¶é©±åŠ¨
â””â”€â”€ interface/       âœ… æ¥å£å±‚ï¼šæ§åˆ¶å™¨ã€å®ˆå«ã€è£…é¥°å™¨ã€ä¸­é—´ä»¶
```

**æ¶æ„ç‰¹ç‚¹**:

- âœ… ä¸¥æ ¼éµå¾ªä¾èµ–å€’ç½®åŸåˆ™ (DIP)
- âœ… å†…å±‚ä¸ä¾èµ–å¤–å±‚
- âœ… æ¥å£å®šä¹‰æ¸…æ™°
- âœ… èŒè´£åˆ†ç¦»æ˜ç¡®
- âœ… ä¸ºä¸šåŠ¡æ¨¡å—æä¾›æ¸…æ™°çš„æ¶æ„è“å›¾

### 2.3 DDD æ”¯æŒ (è¯„åˆ†: â­â­â­â­â­)

**æ ¸å¿ƒç»„ä»¶å®Œæ•´æ€§**:

| ç»„ä»¶              | çŠ¶æ€ | è¯„ä»·                               |
| ----------------- | ---- | ---------------------------------- |
| BaseEntity        | âœ…   | å®Œæ•´å®ç°ï¼ŒåŒ…å«å®¡è®¡ä¿¡æ¯ã€å¤šç§Ÿæˆ·æ”¯æŒ |
| BaseAggregateRoot | âœ…   | å®Œæ•´å®ç°ï¼ŒåŒ…å«äº‹ä»¶ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶   |
| BaseValueObject   | âœ…   | å®Œæ•´å®ç°ï¼Œæ”¯æŒç›¸ç­‰æ€§æ¯”è¾ƒã€éªŒè¯     |
| BaseDomainEvent   | âœ…   | å®Œæ•´å®ç°ï¼Œæ”¯æŒäº‹ä»¶å…ƒæ•°æ®ã€ç‰ˆæœ¬     |
| IDomainService    | âœ…   | æ¥å£å®šä¹‰æ¸…æ™°                       |
| ä»“å‚¨æ¥å£          | âœ…   | å®Œæ•´çš„ä»“å‚¨æ¥å£ä½“ç³»                 |

**DDD æ¨¡å¼æ”¯æŒ**:

- âœ… å……è¡€æ¨¡å‹ (Rich Domain Model)
- âœ… å®ä½“ä¸èšåˆæ ¹åˆ†ç¦»
- âœ… å€¼å¯¹è±¡ä¸å¯å˜æ€§
- âœ… é¢†åŸŸäº‹ä»¶å‘å¸ƒè®¢é˜…
- âœ… ä¸šåŠ¡è§„åˆ™å°è£…

### 2.4 CQRS æ”¯æŒ (è¯„åˆ†: â­â­â­â­â­)

**CQRS ç»„ä»¶å®Œæ•´æ€§**:

```typescript
// å‘½ä»¤ç³»ç»Ÿ
âœ… ICommand - å‘½ä»¤æ¥å£
âœ… ICommandHandler - å‘½ä»¤å¤„ç†å™¨æ¥å£
âœ… CommandBus - å‘½ä»¤æ€»çº¿
âœ… BaseCommand - åŸºç¡€å‘½ä»¤ç±»

// æŸ¥è¯¢ç³»ç»Ÿ
âœ… IQuery - æŸ¥è¯¢æ¥å£
âœ… IQueryHandler - æŸ¥è¯¢å¤„ç†å™¨æ¥å£
âœ… QueryBus - æŸ¥è¯¢æ€»çº¿
âœ… BaseQuery - åŸºç¡€æŸ¥è¯¢ç±»

// äº‹ä»¶ç³»ç»Ÿ
âœ… EventBus - äº‹ä»¶æ€»çº¿
âœ… EventProjector - äº‹ä»¶æŠ•å½±å™¨
âœ… ProjectorManager - æŠ•å½±ç®¡ç†å™¨
```

**CQRS ç‰¹æ€§**:

- âœ… å‘½ä»¤æŸ¥è¯¢å®Œå…¨åˆ†ç¦»
- âœ… è£…é¥°å™¨æ”¯æŒ (@CommandHandler, @QueryHandler)
- âœ… äº‹ä»¶æŠ•å½±å™¨æ”¯æŒ
- âœ… Saga æ¨¡å¼æ”¯æŒ

### 2.5 äº‹ä»¶æº¯æº (ES) æ”¯æŒ (è¯„åˆ†: â­â­â­â­â˜†)

**äº‹ä»¶æº¯æºç»„ä»¶**:

| ç»„ä»¶                  | çŠ¶æ€ | è¯´æ˜                     |
| --------------------- | ---- | ------------------------ |
| IEventStore           | âœ…   | äº‹ä»¶å­˜å‚¨æ¥å£å®šä¹‰å®Œæ•´     |
| IEventStoreRepository | âœ…   | äº‹ä»¶å­˜å‚¨ä»“å‚¨æ¥å£         |
| ISnapshotStore        | âœ…   | å¿«ç…§å­˜å‚¨æ¥å£             |
| EventStoreAdapter     | âœ…   | äº‹ä»¶å­˜å‚¨é€‚é…å™¨           |
| äº‹ä»¶ç‰ˆæœ¬ç®¡ç†          | âœ…   | æ”¯æŒäº‹ä»¶ç‰ˆæœ¬æ§åˆ¶         |
| çŠ¶æ€é‡å»º              | âœ…   | èšåˆæ ¹æ”¯æŒä»äº‹ä»¶æµé‡å»º   |
| å®é™…å®ç°              | âš ï¸   | éœ€è¦ç¡®è®¤å…·ä½“å®ç°çš„å®Œæ•´æ€§ |

**æ”¹è¿›ç©ºé—´**:

- âš ï¸ éœ€è¦æ›´å¤šå®é™…ç¤ºä¾‹æ¼”ç¤ºäº‹ä»¶æº¯æºçš„ä½¿ç”¨
- âš ï¸ å¿«ç…§æœºåˆ¶çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥éœ€è¦æ–‡æ¡£è¯´æ˜

### 2.6 äº‹ä»¶é©±åŠ¨æ¶æ„ (EDA) æ”¯æŒ (è¯„åˆ†: â­â­â­â­â˜†)

**äº‹ä»¶é©±åŠ¨ç»„ä»¶**:

```
âœ… EventBus - äº‹ä»¶æ€»çº¿
âœ… IEventBus - äº‹ä»¶æ€»çº¿æ¥å£
âœ… EventMonitor - äº‹ä»¶ç›‘æ§å™¨
âœ… DeadLetterQueue - æ­»ä¿¡é˜Ÿåˆ—
âœ… @EventHandler - äº‹ä»¶å¤„ç†å™¨è£…é¥°å™¨
âš ï¸ äº‹ä»¶åºåˆ—åŒ–ä¸ååºåˆ—åŒ–
âš ï¸ äº‹ä»¶æŒä¹…åŒ–ç­–ç•¥
```

### 2.7 å¤šç§Ÿæˆ·æ¶æ„æ”¯æŒ (è¯„åˆ†: â­â­â­â­â­)

**å¤šç§Ÿæˆ·åŠŸèƒ½**:

- âœ… TenantContextService é›†æˆ
- âœ… TenantIsolationService é›†æˆ
- âœ… BaseEntity åŒ…å«ç§Ÿæˆ·æ ‡è¯†
- âœ… BaseAggregateRoot æ”¯æŒç§Ÿæˆ·éš”ç¦»
- âœ… TenantIsolationGuard ç§Ÿæˆ·éš”ç¦»å®ˆå«
- âœ… è‡ªåŠ¨ç»‘å®šç§Ÿæˆ·ä¸Šä¸‹æ–‡

---

## 3. ä»£ç è´¨é‡è¯„ä¼°

### 3.1 TypeScript ç±»å‹ç³»ç»Ÿ (è¯„åˆ†: â­â­â­â­â­)

**ç±»å‹å®‰å…¨**:

```typescript
âœ… ä¸¥æ ¼æ¨¡å¼å¯ç”¨ (strict: true)
âœ… å®Œæ•´çš„ç±»å‹å®šä¹‰
âœ… æ³›å‹ä½¿ç”¨åˆç†
âœ… ç±»å‹æ¨å¯¼ä¼˜ç§€
âœ… é¿å…ä½¿ç”¨ any
âœ… const assertions ä½¿ç”¨æ­£ç¡®
```

**tsconfig.json é…ç½®**:

```json
{
  "compilerOptions": {
    "strict": true,                              âœ…
    "noImplicitReturns": true,                  âœ…
    "noFallthroughCasesInSwitch": true,         âœ…
    "noImplicitOverride": true,                 âœ…
    "noPropertyAccessFromIndexSignature": true, âœ…
    "forceConsistentCasingInFileNames": true    âœ…
  }
}
```

### 3.2 ä»£ç æ³¨é‡Š (è¯„åˆ†: â­â­â­â­â­)

**æ³¨é‡Šè´¨é‡**:

````typescript
/**
 * åŸºç¡€å®ä½“ç±»
 *
 * å®ä½“æ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå…·æœ‰å”¯ä¸€æ ‡è¯†ç¬¦å’Œç”Ÿå‘½å‘¨æœŸã€‚
 * å®ä½“çš„ç›¸ç­‰æ€§åŸºäºå…¶æ ‡è¯†ç¬¦ï¼Œè€Œä¸æ˜¯å±æ€§å€¼ã€‚
 *
 * ## ä¸šåŠ¡è§„åˆ™
 *
 * ### æ ‡è¯†ç¬¦è§„åˆ™
 * - æ¯ä¸ªå®ä½“å¿…é¡»å…·æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦
 * - æ ‡è¯†ç¬¦åœ¨å®ä½“ç”Ÿå‘½å‘¨æœŸå†…ä¸å¯å˜æ›´
 * ...
 *
 * @description æ‰€æœ‰å®ä½“çš„åŸºç±»ï¼Œæä¾›ä¸šåŠ¡æ¨¡å—æ‰€éœ€çš„åŸºç¡€å®ä½“åŠŸèƒ½
 * @example
 * ```typescript
 * class User extends BaseEntity {
 *   // ç¤ºä¾‹ä»£ç 
 * }
 * ```
 * @since 1.0.0
 */
````

**æ³¨é‡Šç‰¹ç‚¹**:

- âœ… ä¸¥æ ¼éµå¾ª TSDoc è§„èŒƒ
- âœ… ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šï¼Œæ¸…æ™°å‡†ç¡®
- âœ… åŒ…å«è¯¦ç»†çš„ä¸šåŠ¡è§„åˆ™æè¿°
- âœ… æä¾›å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
- âœ… æ ‡è®°ç‰ˆæœ¬ä¿¡æ¯
- âœ… é¿å…ä½¿ç”¨ @created, @author, @version

### 3.3 å¸¸é‡ç®¡ç† (è¯„åˆ†: â­â­â­â­â­)

**å¸¸é‡å®šä¹‰**:

```typescript
// constants.ts
export const ENTITY_OPERATIONS = {
  CREATE: "CREATE",
  UPDATE: "UPDATE",
  DELETE: "DELETE",
  RESTORE: "RESTORE",
} as const;

export const METADATA_KEYS = {
  DOMAIN_EVENT: Symbol("domainEvent"),
  AGGREGATE: Symbol("aggregate"),
  USE_CASE: Symbol("useCase"),
  // ...
} as const;
```

**å¸¸é‡ç®¡ç†ä¼˜åŠ¿**:

- âœ… é›†ä¸­ç®¡ç†å¸¸é‡
- âœ… ä½¿ç”¨ `as const` ç¡®ä¿ç±»å‹å®‰å…¨
- âœ… å‘½åç©ºé—´ç»„ç»‡æ¸…æ™°
- âœ… é¿å…ç¡¬ç¼–ç 
- âœ… æä¾›å·¥å…·å‡½æ•°éªŒè¯å¸¸é‡

### 3.4 å‘½åè§„èŒƒ (è¯„åˆ†: â­â­â­â­â­)

**å‘½åçº¦å®šæ£€æŸ¥**:

| ç±»å‹   | è§„èŒƒ             | å®é™…                 | è¯„ä»· |
| ------ | ---------------- | -------------------- | ---- |
| æ–‡ä»¶å | kebab-case       | âœ… base-entity.ts    | ç¬¦åˆ |
| å˜é‡å | camelCase        | âœ… \_domainEvents    | ç¬¦åˆ |
| å¸¸é‡å | UPPER_SNAKE_CASE | âœ… ENTITY_OPERATIONS | ç¬¦åˆ |
| ç±»å   | PascalCase       | âœ… BaseEntity        | ç¬¦åˆ |
| æ¥å£å | I+PascalCase     | âœ… IEntity           | ç¬¦åˆ |
| æ–¹æ³•å | camelCase+åŠ¨è¯   | âœ… addDomainEvent()  | ç¬¦åˆ |

### 3.5 ä¾èµ–æ³¨å…¥ (è¯„åˆ†: â­â­â­â­â­)

**DI å®ç°**:

```typescript
// ä½¿ç”¨å¸¸é‡è€Œéç¡¬ç¼–ç å­—ç¬¦ä¸²
@Inject(DI_TOKENS.MODULE_OPTIONS)  âœ…
// è€Œä¸æ˜¯
@Inject('MODULE_OPTIONS')  âŒ
```

### 3.6 ä»£ç ç»„ç»‡ (è¯„åˆ†: â­â­â­â­â˜†)

**æ¨¡å—å¯¼å‡ºç­–ç•¥**:

```typescript
// index.ts - ç²¾ç¡®å¯¼å‡ºç­–ç•¥
export {
  BaseEntity,
  BaseAggregateRoot,
  BaseValueObject,
  BaseDomainEvent,
  // ...
} from "./domain";
```

**ä¼˜ç‚¹**:

- âœ… ç²¾ç¡®å¯¼å‡ºï¼Œé¿å…å¾ªç¯ä¾èµ–
- âœ… æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
- âœ… å¯¼å‡ºç­–ç•¥æ¸…æ™°

**æ”¹è¿›ç©ºé—´**:

- âš ï¸ éƒ¨åˆ†æ¨¡å—ä½¿ç”¨ `export *`ï¼Œå¯èƒ½å¯¼è‡´å‘½åå†²çª

---

## 4. æ–‡æ¡£è¯„ä¼°

### 4.1 README.md (è¯„åˆ†: â­â­â˜†â˜†â˜†)

**å½“å‰çŠ¶æ€**: æå…¶ç®€é™‹

```markdown
# hybrid-archi

This library was generated with [Nx](https://nx.dev).

## Building

Run `nx build hybrid-archi` to build the library.

## Running unit tests

Run `nx test hybrid-archi` to execute the unit tests via [Jest](https://jestjs.io).
```

**é—®é¢˜**:

- âŒ ç¼ºå°‘æ¨¡å—ä»‹ç»
- âŒ ç¼ºå°‘æ¶æ„è¯´æ˜
- âŒ ç¼ºå°‘ä½¿ç”¨æŒ‡å—
- âŒ ç¼ºå°‘ç¤ºä¾‹ä»£ç 
- âŒ ç¼ºå°‘è´¡çŒ®æŒ‡å—

**å»ºè®®å†…å®¹**:

```markdown
# hybrid-archi

## ç®€ä»‹

æ··åˆæ¶æ„æ ¸å¿ƒæ¨¡å—ï¼Œä¸ºä¸šåŠ¡æ¨¡å—å¼€å‘æä¾›ç»Ÿä¸€çš„æ¶æ„è®¾è®¡æ¨¡å¼...

## æ¶æ„æ¦‚è¿°

### Clean Architecture

### DDD

### CQRS

### Event Sourcing

### Event-Driven Architecture

### å¤šç§Ÿæˆ·æ¶æ„

## å®‰è£…ä¸ä½¿ç”¨

...

## æ ¸å¿ƒæ¦‚å¿µ

### é¢†åŸŸå±‚

### åº”ç”¨å±‚

### åŸºç¡€è®¾æ–½å±‚

### æ¥å£å±‚

## å¿«é€Ÿå¼€å§‹

...

## API æ–‡æ¡£

...

## ç¤ºä¾‹

...

## è´¡çŒ®æŒ‡å—

...
```

### 4.2 æµ‹è¯•æ–‡æ¡£ (è¯„åˆ†: â­â­â­â­â­)

**testing-standards.md**:

- âœ… å®Œæ•´çš„æµ‹è¯•è§„èŒƒ
- âœ… æ¸…æ™°çš„æµ‹è¯•åˆ†ç±»
- âœ… è¯¦ç»†çš„æµ‹è¯•æŒ‡å¯¼
- âœ… æµ‹è¯•æœ€ä½³å®è·µ
- âœ… æµ‹è¯•å·¥å…·é…ç½®

### 4.3 ä»£ç å†…æ–‡æ¡£ (è¯„åˆ†: â­â­â­â­â­)

**TSDoc æ³¨é‡Š**:

- âœ… æ‰€æœ‰å…¬å…± API éƒ½æœ‰å®Œæ•´æ³¨é‡Š
- âœ… ä¸šåŠ¡è§„åˆ™æè¿°è¯¦ç»†
- âœ… ä½¿ç”¨åœºæ™¯è¯´æ˜æ¸…æ™°
- âœ… ç¤ºä¾‹ä»£ç å®Œæ•´

### 4.4 æ¶æ„æ–‡æ¡£ (è¯„åˆ†: â­â­â­â˜†â˜†)

**ç¼ºå¤±çš„æ–‡æ¡£**:

- âš ï¸ æ•´ä½“æ¶æ„è®¾è®¡æ–‡æ¡£
- âš ï¸ æ¨¡å—ä½¿ç”¨æŒ‡å—
- âš ï¸ æœ€ä½³å®è·µæ–‡æ¡£
- âš ï¸ è¿ç§»æŒ‡å—
- âš ï¸ æ•…éšœæ’é™¤æ–‡æ¡£

---

## 5. æµ‹è¯•è¯„ä¼°

### 5.1 æµ‹è¯•æ–‡ä»¶ç»Ÿè®¡ (è¯„åˆ†: â­â­â­â­â˜†)

**æµ‹è¯•æ–‡ä»¶æ•°é‡**: 397 ä¸ª TypeScript æ–‡ä»¶ï¼ˆæ€»è®¡ï¼‰

**æµ‹è¯•æ–‡ä»¶åˆ†å¸ƒ**:

```
src/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/base/base-entity.spec.ts          âœ…
â”‚   â”œâ”€â”€ aggregates/base/base-aggregate-root.spec.ts âœ…
â”‚   â””â”€â”€ value-objects/base-value-object.spec.ts    âœ…
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ cqrs/bus/cqrs-bus.spec.ts             âœ…
â”‚   â”œâ”€â”€ cqrs/bus/command-bus.spec.ts          âœ…
â”‚   â”œâ”€â”€ cqrs/bus/event-bus.spec.ts            âœ…
â”‚   â””â”€â”€ cqrs/bus/query-bus.spec.ts            âœ…
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ adapters/cache/cache.adapter.spec.ts        âœ…
â”‚   â””â”€â”€ adapters/database/database.adapter.spec.ts  âœ…
â””â”€â”€ __tests__/
    â”œâ”€â”€ integration/user-management.integration.spec.ts âœ…
    â””â”€â”€ infrastructure/e2e/infrastructure.e2e.spec.ts   âœ…
```

### 5.2 æµ‹è¯•ç±»å‹å®Œæ•´æ€§ (è¯„åˆ†: â­â­â­â­â˜†)

| æµ‹è¯•ç±»å‹ | çŠ¶æ€ | è¯´æ˜                 |
| -------- | ---- | -------------------- |
| å•å…ƒæµ‹è¯• | âœ…   | æ ¸å¿ƒç»„ä»¶éƒ½æœ‰å•å…ƒæµ‹è¯• |
| é›†æˆæµ‹è¯• | âœ…   | åŒ…å«é›†æˆæµ‹è¯•         |
| E2E æµ‹è¯• | âœ…   | åŒ…å«ç«¯åˆ°ç«¯æµ‹è¯•       |
| æ€§èƒ½æµ‹è¯• | âš ï¸   | æœªè§æ˜ç¡®çš„æ€§èƒ½æµ‹è¯•   |
| å‹åŠ›æµ‹è¯• | âš ï¸   | æœªè§æ˜ç¡®çš„å‹åŠ›æµ‹è¯•   |

### 5.3 æµ‹è¯•ç»„ç»‡ (è¯„åˆ†: â­â­â­â­â­)

**æµ‹è¯•æ–‡ä»¶ç»„ç»‡**:

- âœ… å•å…ƒæµ‹è¯•ä¸è¢«æµ‹è¯•æ–‡ä»¶åŒç›®å½•
- âœ… é›†æˆæµ‹è¯•é›†ä¸­åœ¨ `__tests__/integration/`
- âœ… E2E æµ‹è¯•é›†ä¸­åœ¨ `__tests__/infrastructure/e2e/`
- âœ… éµå¾ªæµ‹è¯•è§„èŒƒæ–‡æ¡£

### 5.4 æµ‹è¯•è¦†ç›–ç‡ (è¯„åˆ†: â­â­â­â˜†â˜†)

**é—®é¢˜**: æ— æ³•ç¡®è®¤å®é™…æµ‹è¯•è¦†ç›–ç‡

**å»ºè®®**:

- è¿è¡Œ `nx test hybrid-archi --coverage`
- è®¾ç½®è¦†ç›–ç‡ç›®æ ‡ï¼ˆå»ºè®® 80%+ï¼‰
- é…ç½® CI/CD è‡ªåŠ¨æ£€æŸ¥è¦†ç›–ç‡

---

## 6. ä¾èµ–å…³ç³»è¯„ä¼°

### 6.1 å†…éƒ¨ä¾èµ– (è¯„åˆ†: â­â­â­â­â­)

**workspace ä¾èµ–**:

```json
{
  "dependencies": {
    "@hl8/cache": "workspace:*",           âœ…
    "@hl8/common": "workspace:*",          âœ…
    "@hl8/config": "workspace:*",          âœ…
    "@hl8/database": "workspace:*",        âœ…
    "@hl8/fastify-pro": "workspace:*",     âœ…
    "@hl8/logger": "workspace:*",          âœ…
    "@hl8/messaging": "workspace:*",       âœ…
    "@hl8/multi-tenancy": "workspace:*"    âœ…
  }
}
```

**ä¾èµ–ç‰¹ç‚¹**:

- âœ… é›†æˆæ‰€æœ‰åŸºç¡€è®¾æ–½æ¨¡å—
- âœ… ä½¿ç”¨ workspace åè®®
- âœ… ä¾èµ–å…³ç³»æ¸…æ™°

### 6.2 å¤–éƒ¨ä¾èµ– (è¯„åˆ†: â­â­â­â­â˜†)

**æ ¸å¿ƒä¾èµ–**:

```json
{
  "@nestjs/common": "^11.1.6",    âœ…
  "@nestjs/core": "^11.1.6",      âœ…
  "@nestjs/jwt": "^11.0.0",       âœ…
  "class-transformer": "^0.5.1",  âœ…
  "class-validator": "^0.14.2",   âœ…
  "uuid": "^9.0.0"                âœ…
}
```

**ä¾èµ–è¯„ä»·**:

- âœ… ä¾èµ–ç‰ˆæœ¬åˆç†
- âœ… æ ¸å¿ƒä¾èµ–å®Œæ•´
- âš ï¸ å¯èƒ½éœ€è¦å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬

### 6.3 ä¾èµ–æ–¹å‘ (è¯„åˆ†: â­â­â­â­â­)

**ä¾èµ–å€’ç½®åŸåˆ™æ£€æŸ¥**:

```
interface â† domain â† application â† infrastructure
   âœ…        âœ…         âœ…              âœ…
```

- âœ… é¢†åŸŸå±‚ä¸ä¾èµ–å¤–å±‚
- âœ… åº”ç”¨å±‚åªä¾èµ–é¢†åŸŸå±‚æ¥å£
- âœ… åŸºç¡€è®¾æ–½å±‚å®ç°é¢†åŸŸå±‚æ¥å£
- âœ… æ¥å£å±‚ä¾èµ–åº”ç”¨å±‚

---

## 7. åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°

### 7.1 é¢†åŸŸå±‚åŠŸèƒ½ (è¯„åˆ†: â­â­â­â­â­)

**æ ¸å¿ƒç»„ä»¶**:

- âœ… BaseEntity - åŸºç¡€å®ä½“
- âœ… BaseAggregateRoot - åŸºç¡€èšåˆæ ¹
- âœ… BaseValueObject - åŸºç¡€å€¼å¯¹è±¡
- âœ… BaseDomainEvent - åŸºç¡€é¢†åŸŸäº‹ä»¶
- âœ… IDomainService - é¢†åŸŸæœåŠ¡æ¥å£
- âœ… IRepository - ä»“å‚¨æ¥å£
- âœ… ä¸šåŠ¡è§„åˆ™ç³»ç»Ÿ
- âœ… éªŒè¯ç³»ç»Ÿ
- âœ… å®‰å…¨ç³»ç»Ÿ

**å€¼å¯¹è±¡ä½“ç³»**:

```
value-objects/
â”œâ”€â”€ identities/       âœ… èº«ä»½å€¼å¯¹è±¡
â”œâ”€â”€ ids/             âœ… ID å€¼å¯¹è±¡ (EntityId, TenantId, UserId)
â”œâ”€â”€ statuses/        âœ… çŠ¶æ€å€¼å¯¹è±¡
â”œâ”€â”€ types/           âœ… ç±»å‹å€¼å¯¹è±¡
â”œâ”€â”€ audit/           âœ… å®¡è®¡å€¼å¯¹è±¡
â””â”€â”€ security/        âœ… å®‰å…¨å€¼å¯¹è±¡
```

### 7.2 åº”ç”¨å±‚åŠŸèƒ½ (è¯„åˆ†: â­â­â­â­â­)

**CQRS ç³»ç»Ÿ**:

- âœ… å‘½ä»¤ç³»ç»Ÿ (Commands)
- âœ… æŸ¥è¯¢ç³»ç»Ÿ (Queries)
- âœ… äº‹ä»¶ç³»ç»Ÿ (Events)
- âœ… Saga ç³»ç»Ÿ (Sagas)
- âœ… äº‹ä»¶å­˜å‚¨ (Event Store)
- âœ… CQRS æ€»çº¿ (Bus)

**ç”¨ä¾‹ç³»ç»Ÿ**:

- âœ… IUseCase æ¥å£
- âœ… ç”¨ä¾‹æ³¨å†Œè¡¨
- âœ… ç”¨ä¾‹æ‰§è¡Œå™¨
- âœ… ç”¨ä¾‹è£…é¥°å™¨

**ç«¯å£ç³»ç»Ÿ**:

- âœ… è¾“å‡ºç«¯å£æ¥å£å®šä¹‰
- âœ… ç«¯å£é€‚é…å™¨æ¨¡å¼æ”¯æŒ

### 7.3 åŸºç¡€è®¾æ–½å±‚åŠŸèƒ½ (è¯„åˆ†: â­â­â­â­â˜†)

**é€‚é…å™¨ç³»ç»Ÿ**:

```
adapters/
â”œâ”€â”€ cache/           âœ… ç¼“å­˜é€‚é…å™¨
â”œâ”€â”€ database/        âœ… æ•°æ®åº“é€‚é…å™¨
â”œâ”€â”€ event-store/     âœ… äº‹ä»¶å­˜å‚¨é€‚é…å™¨
â”œâ”€â”€ message-queue/   âœ… æ¶ˆæ¯é˜Ÿåˆ—é€‚é…å™¨
â”œâ”€â”€ ports/           âœ… ç«¯å£é€‚é…å™¨
â”œâ”€â”€ repositories/    âœ… ä»“å‚¨é€‚é…å™¨
â””â”€â”€ services/        âœ… æœåŠ¡é€‚é…å™¨
```

**äº‹ä»¶ç³»ç»Ÿ**:

- âœ… äº‹ä»¶å­˜å‚¨å®ç°
- âœ… å¿«ç…§å­˜å‚¨å®ç°
- âœ… äº‹ä»¶ç›‘æ§å™¨
- âœ… æ­»ä¿¡é˜Ÿåˆ—

**å·¥å‚ç³»ç»Ÿ**:

- âœ… InfrastructureFactory
- âœ… PortAdaptersFactory
- âš ï¸ å…·ä½“å®ç°éœ€è¦éªŒè¯å®Œæ•´æ€§

### 7.4 æ¥å£å±‚åŠŸèƒ½ (è¯„åˆ†: â­â­â­â­â­)

**æ§åˆ¶å™¨**:

- âœ… BaseController - REST æ§åˆ¶å™¨åŸºç±»

**å®ˆå«**:

- âœ… JwtAuthGuard - JWT è®¤è¯å®ˆå«
- âœ… PermissionGuard - æƒé™å®ˆå«
- âœ… TenantIsolationGuard - ç§Ÿæˆ·éš”ç¦»å®ˆå«

**è£…é¥°å™¨**:

- âœ… @RequirePermissions - æƒé™è£…é¥°å™¨
- âœ… @TenantContext - ç§Ÿæˆ·ä¸Šä¸‹æ–‡è£…é¥°å™¨
- âœ… @CurrentUser - å½“å‰ç”¨æˆ·è£…é¥°å™¨
- âœ… @CacheTTL - ç¼“å­˜ TTL è£…é¥°å™¨

**ç®¡é“**:

- âœ… ValidationPipe - éªŒè¯ç®¡é“

**ä¸­é—´ä»¶**:

- âœ… LoggingMiddleware - æ—¥å¿—ä¸­é—´ä»¶

**å…¶ä»–**:

- âœ… BaseResolver - GraphQL è§£æå™¨åŸºç±»
- âœ… BaseGateway - WebSocket ç½‘å…³åŸºç±»
- âœ… BaseCommand - CLI å‘½ä»¤åŸºç±»

---

## 8. ä¼˜åŠ¿åˆ†æ

### 8.1 æ¶æ„ä¼˜åŠ¿

1. **æ˜ç¡®çš„åŸºç¡€å®šä½**
   - ä½œä¸ºæ‰€æœ‰ä¸šåŠ¡æ¨¡å—çš„æ¶æ„åŸºç¡€
   - æä¾›ç»Ÿä¸€çš„æ··åˆæ¶æ„æ¨¡å¼
   - æä¾›å®Œæ•´çš„é€šç”¨åŠŸèƒ½ç»„ä»¶
   - ä¿éšœå¹³å°æ¶æ„ä¸€è‡´æ€§

2. **å®Œæ•´çš„æ··åˆæ¶æ„å®ç°**
   - æˆåŠŸæ•´åˆ Clean Architecture, DDD, CQRS, ES, EDA
   - å„æ¶æ„æ¨¡å¼æœ‰æœºèåˆï¼Œç›¸äº’è¡¥å……
   - ä¸ºä¸šåŠ¡æ¨¡å—æä¾›æ¸…æ™°çš„æ¶æ„è“å›¾

3. **æ¸…æ™°çš„åˆ†å±‚è®¾è®¡**
   - ä¾èµ–æ–¹å‘æ­£ç¡®
   - èŒè´£åˆ†ç¦»æ˜ç¡®
   - æ¥å£å®šä¹‰æ¸…æ™°
   - ä¸šåŠ¡æ¨¡å—å¯ç›´æ¥å¤ç”¨

4. **å¼ºå¤§çš„å¤šç§Ÿæˆ·æ”¯æŒ**
   - ç§Ÿæˆ·éš”ç¦»å®Œå–„
   - è‡ªåŠ¨ç»‘å®šç§Ÿæˆ·ä¸Šä¸‹æ–‡
   - æ•°æ®éš”ç¦»ä¿è¯

### 8.2 ä»£ç è´¨é‡ä¼˜åŠ¿

1. **æé«˜çš„ç±»å‹å®‰å…¨æ€§**
   - TypeScript ä¸¥æ ¼æ¨¡å¼
   - å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ
   - é¿å…è¿è¡Œæ—¶é”™è¯¯

2. **ä¼˜ç§€çš„ä»£ç æ³¨é‡Š**
   - TSDoc è§„èŒƒ
   - ä¸šåŠ¡è§„åˆ™æ¸…æ™°
   - ç¤ºä¾‹å®Œæ•´

3. **è‰¯å¥½çš„å¸¸é‡ç®¡ç†**
   - é›†ä¸­ç®¡ç†
   - ç±»å‹å®‰å…¨
   - é¿å…ç¡¬ç¼–ç 

### 8.3 å¯æ‰©å±•æ€§ä¼˜åŠ¿

1. **æ’ä»¶åŒ–è®¾è®¡**
   - é€‚é…å™¨æ¨¡å¼
   - å·¥å‚æ¨¡å¼
   - ç«¯å£é€‚é…å™¨æ¨¡å¼

2. **è£…é¥°å™¨æ”¯æŒ**
   - å…ƒç¼–ç¨‹èƒ½åŠ›
   - å£°æ˜å¼ç¼–ç¨‹
   - ä»£ç ç®€æ´

3. **äº‹ä»¶é©±åŠ¨èƒ½åŠ›**
   - æ¾è€¦åˆ
   - å¼‚æ­¥å¤„ç†
   - æ˜“äºæ‰©å±•

### 8.4 å¼€å‘ä½“éªŒä¼˜åŠ¿

1. **ç»Ÿä¸€çš„å¼€å‘æ¨¡å¼**
   - æ‰€æœ‰ä¸šåŠ¡æ¨¡å—ä½¿ç”¨ç›¸åŒæ¨¡å¼
   - é™ä½å­¦ä¹ æ›²çº¿
   - æé«˜å¼€å‘æ•ˆç‡

2. **ä¸°å¯Œçš„åŸºç¡€ç»„ä»¶**
   - å€¼å¯¹è±¡ä½“ç³»
   - å®ä½“åŸºç±»
   - æœåŠ¡åŸºç±»

3. **å®Œæ•´çš„æµ‹è¯•æ”¯æŒ**
   - æµ‹è¯•è§„èŒƒ
   - æµ‹è¯•å·¥å…·
   - æµ‹è¯•ç¤ºä¾‹

---

## 9. é—®é¢˜åˆ†æ

### 9.1 æ–‡æ¡£é—®é¢˜ (ä¼˜å…ˆçº§: ğŸ”´ é«˜)

**é—®é¢˜æè¿°**:

- README.md è¿‡äºç®€é™‹
- ç¼ºå°‘ä½¿ç”¨æ–‡æ¡£
- ç¼ºå°‘æ¶æ„æ–‡æ¡£
- ç¼ºå°‘è¿ç§»æŒ‡å—

**å½±å“**:

- æ–°å¼€å‘è€…éš¾ä»¥ç†è§£æ¨¡å—
- ä½¿ç”¨é—¨æ§›é«˜
- ç»´æŠ¤å›°éš¾

**å»ºè®®**:

- ç¼–å†™å®Œæ•´çš„ README
- åˆ›å»ºæ¶æ„è®¾è®¡æ–‡æ¡£
- æä¾›è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—
- æ·»åŠ ç«¯åˆ°ç«¯ç¤ºä¾‹

### 9.2 ç¤ºä¾‹ç¼ºå¤± (ä¼˜å…ˆçº§: ğŸŸ¡ ä¸­)

**é—®é¢˜æè¿°**:

- ç¼ºå°‘å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
- ç¼ºå°‘ç«¯åˆ°ç«¯ç¤ºä¾‹
- ç¼ºå°‘æœ€ä½³å®è·µç¤ºä¾‹

**å½±å“**:

- å¼€å‘è€…ä¸çŸ¥å¦‚ä½•ä½¿ç”¨
- å®¹æ˜“äº§ç”Ÿè¯¯ç”¨
- å­¦ä¹ æˆæœ¬é«˜

**å»ºè®®**:

- åˆ›å»º `examples/` ç›®å½•
- æä¾›å®Œæ•´çš„ä¸šåŠ¡ç¤ºä¾‹
- æ·»åŠ å¸¸è§åœºæ™¯ç¤ºä¾‹
- æä¾›åæ¨¡å¼è­¦ç¤º

### 9.3 éƒ¨åˆ†åŠŸèƒ½æœªéªŒè¯ (ä¼˜å…ˆçº§: ğŸŸ¡ ä¸­)

**é—®é¢˜æè¿°**:

- æ— æ³•ç¡®è®¤æ‰€æœ‰é€‚é…å™¨çš„å®Œæ•´å®ç°
- æ— æ³•ç¡®è®¤å·¥å‚ç±»çš„å®Œæ•´å®ç°
- æ— æ³•ç¡®è®¤äº‹ä»¶æº¯æºçš„å®Œæ•´å®ç°

**å½±å“**:

- å¯èƒ½å­˜åœ¨æœªå®Œæˆçš„åŠŸèƒ½
- å¯èƒ½å­˜åœ¨éšè—çš„ bug
- åŠŸèƒ½å®Œæ•´æ€§å­˜ç–‘

**å»ºè®®**:

- è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡
- è¡¥å……ç¼ºå¤±çš„æµ‹è¯•
- éªŒè¯æ‰€æœ‰åŠŸèƒ½ç‚¹

### 9.4 æµ‹è¯•è¦†ç›–ç‡æœªçŸ¥ (ä¼˜å…ˆçº§: ğŸŸ¡ ä¸­)

**é—®é¢˜æè¿°**:

- æ— æ³•ç¡®è®¤å®é™…æµ‹è¯•è¦†ç›–ç‡
- æ— æ³•ç¡®è®¤æµ‹è¯•è´¨é‡

**å½±å“**:

- ä»£ç è´¨é‡æ— æ³•ä¿è¯
- é‡æ„é£é™©é«˜
- å›å½’æµ‹è¯•ä¸å®Œæ•´

**å»ºè®®**:

- è¿è¡Œè¦†ç›–ç‡æŠ¥å‘Š
- è®¾ç½®è¦†ç›–ç‡ç›®æ ‡
- è¡¥å……ç¼ºå¤±çš„æµ‹è¯•
- é…ç½® CI/CD æ£€æŸ¥

### 9.5 æ€§èƒ½ä¼˜åŒ–æœªæ˜ç¡® (ä¼˜å…ˆçº§: ğŸŸ¢ ä½)

**é—®é¢˜æè¿°**:

- ç¼“å­˜ç­–ç•¥æœªæ˜ç¡®
- æ€§èƒ½ä¼˜åŒ–ç­–ç•¥æœªæ˜ç¡®
- å¤§æ•°æ®é‡å¤„ç†ç­–ç•¥æœªæ˜ç¡®

**å½±å“**:

- æ€§èƒ½ç“¶é¢ˆå¯èƒ½å‡ºç°
- æ‰©å±•æ€§å—é™

**å»ºè®®**:

- æ·»åŠ æ€§èƒ½æµ‹è¯•
- æ˜ç¡®ç¼“å­˜ç­–ç•¥
- ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- æ·»åŠ æ€§èƒ½ç›‘æ§

---

## 10. æ”¹è¿›å»ºè®®

### 10.1 æ–‡æ¡£æ”¹è¿›

#### 10.1.1 é‡å†™ README.md (ä¼˜å…ˆçº§: ğŸ”´ é«˜)

**å»ºè®®å†…å®¹ç»“æ„**:

```markdown
# hybrid-archi - æ··åˆæ¶æ„æ ¸å¿ƒæ¨¡å—

## ç®€ä»‹

è¯¦ç»†ä»‹ç»æ¨¡å—çš„ä½œç”¨ã€å®šä½ã€æ ¸å¿ƒä»·å€¼

## æ¶æ„æ¦‚è¿°

- Clean Architecture
- Domain-Driven Design
- CQRS
- Event Sourcing
- Event-Driven Architecture
- å¤šç§Ÿæˆ·æ¶æ„

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

### åŸºæœ¬ä½¿ç”¨

### åˆ›å»ºå®ä½“

### åˆ›å»ºèšåˆæ ¹

### å®ç°ç”¨ä¾‹

## æ ¸å¿ƒæ¦‚å¿µ

### é¢†åŸŸå±‚

### åº”ç”¨å±‚

### åŸºç¡€è®¾æ–½å±‚

### æ¥å£å±‚

## API æ–‡æ¡£

é“¾æ¥åˆ°è‡ªåŠ¨ç”Ÿæˆçš„ API æ–‡æ¡£

## ç¤ºä¾‹

é“¾æ¥åˆ°ç¤ºä¾‹é¡¹ç›®

## æœ€ä½³å®è·µ

- å®ä½“è®¾è®¡
- èšåˆæ ¹è®¾è®¡
- å€¼å¯¹è±¡è®¾è®¡
- ç”¨ä¾‹å®ç°
- äº‹ä»¶è®¾è®¡

## å¸¸è§é—®é¢˜

FAQ éƒ¨åˆ†

## è´¡çŒ®æŒ‡å—

å¦‚ä½•è´¡çŒ®ä»£ç 

## è®¸å¯è¯
```

#### 10.1.2 åˆ›å»ºæ¶æ„è®¾è®¡æ–‡æ¡£

**å»ºè®®æ–‡æ¡£**:

- `docs/architecture/overview.md` - æ¶æ„æ¦‚è¿°
- `docs/architecture/domain-layer.md` - é¢†åŸŸå±‚è®¾è®¡
- `docs/architecture/application-layer.md` - åº”ç”¨å±‚è®¾è®¡
- `docs/architecture/infrastructure-layer.md` - åŸºç¡€è®¾æ–½å±‚è®¾è®¡
- `docs/architecture/interface-layer.md` - æ¥å£å±‚è®¾è®¡
- `docs/architecture/cqrs.md` - CQRS è®¾è®¡
- `docs/architecture/event-sourcing.md` - äº‹ä»¶æº¯æºè®¾è®¡
- `docs/architecture/multi-tenancy.md` - å¤šç§Ÿæˆ·è®¾è®¡

#### 10.1.3 åˆ›å»ºä½¿ç”¨æŒ‡å—

**å»ºè®®æŒ‡å—**:

- `docs/guides/getting-started.md` - å¿«é€Ÿå¼€å§‹
- `docs/guides/entity-design.md` - å®ä½“è®¾è®¡æŒ‡å—
- `docs/guides/aggregate-design.md` - èšåˆæ ¹è®¾è®¡æŒ‡å—
- `docs/guides/value-object-design.md` - å€¼å¯¹è±¡è®¾è®¡æŒ‡å—
- `docs/guides/use-case-implementation.md` - ç”¨ä¾‹å®ç°æŒ‡å—
- `docs/guides/event-design.md` - äº‹ä»¶è®¾è®¡æŒ‡å—
- `docs/guides/repository-implementation.md` - ä»“å‚¨å®ç°æŒ‡å—
- `docs/guides/testing.md` - æµ‹è¯•æŒ‡å—
- `docs/guides/migration.md` - è¿ç§»æŒ‡å—

### 10.2 ä»£ç æ”¹è¿›

#### 10.2.1 æ·»åŠ ç¤ºä¾‹ä»£ç 

**å»ºè®®ç¤ºä¾‹**:

```
packages/hybrid-archi/examples/
â”œâ”€â”€ basic/                          # åŸºç¡€ç¤ºä¾‹
â”‚   â”œâ”€â”€ simple-entity.example.ts    # ç®€å•å®ä½“ç¤ºä¾‹
â”‚   â”œâ”€â”€ simple-aggregate.example.ts # ç®€å•èšåˆæ ¹ç¤ºä¾‹
â”‚   â””â”€â”€ simple-value-object.example.ts
â”œâ”€â”€ advanced/                       # é«˜çº§ç¤ºä¾‹
â”‚   â”œâ”€â”€ complex-aggregate.example.ts
â”‚   â”œâ”€â”€ saga.example.ts
â”‚   â””â”€â”€ event-sourcing.example.ts
â”œâ”€â”€ use-cases/                      # ç”¨ä¾‹ç¤ºä¾‹
â”‚   â”œâ”€â”€ create-user.example.ts
â”‚   â”œâ”€â”€ update-user.example.ts
â”‚   â””â”€â”€ delete-user.example.ts
â””â”€â”€ complete/                       # å®Œæ•´ç¤ºä¾‹
    â””â”€â”€ user-management/            # ç”¨æˆ·ç®¡ç†å®Œæ•´ç¤ºä¾‹
        â”œâ”€â”€ domain/
        â”œâ”€â”€ application/
        â”œâ”€â”€ infrastructure/
        â””â”€â”€ interface/
```

#### 10.2.2 æ”¹è¿›å¯¼å‡ºç­–ç•¥

**å½“å‰é—®é¢˜**:

```typescript
// éƒ¨åˆ†ä½¿ç”¨ export *ï¼Œå¯èƒ½å¯¼è‡´å‘½åå†²çª
export * from "./common";
export * from "./domain/enums/common";
```

**å»ºè®®æ”¹è¿›**:

```typescript
// ä½¿ç”¨ç²¾ç¡®å¯¼å‡ºæˆ–é‡å‘½åå¯¼å‡º
export {
  UserStatus as CommonUserStatus,
  UserStatusUtils as CommonUserStatusUtils,
} from "./domain/enums/common";
```

#### 10.2.3 è¡¥å……ç¼ºå¤±çš„æµ‹è¯•

**å»ºè®®**:

1. è¿è¡Œè¦†ç›–ç‡æŠ¥å‘Š
2. è¯†åˆ«æœªæµ‹è¯•çš„ä»£ç 
3. è¡¥å……å•å…ƒæµ‹è¯•
4. è¡¥å……é›†æˆæµ‹è¯•
5. æ·»åŠ æ€§èƒ½æµ‹è¯•

#### 10.2.4 æ·»åŠ æ€§èƒ½ä¼˜åŒ–

**å»ºè®®ä¼˜åŒ–ç‚¹**:

- ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
- äº‹ä»¶æ‰¹é‡å¤„ç†
- å¿«ç…§æœºåˆ¶ä¼˜åŒ–
- æŸ¥è¯¢ä¼˜åŒ–
- è¿æ¥æ± ä¼˜åŒ–

### 10.3 å·¥å…·æ”¹è¿›

#### 10.3.1 é…ç½®ä»£ç ç”Ÿæˆå™¨

**å»ºè®®å·¥å…·**:

- å®ä½“ç”Ÿæˆå™¨
- èšåˆæ ¹ç”Ÿæˆå™¨
- å€¼å¯¹è±¡ç”Ÿæˆå™¨
- ç”¨ä¾‹ç”Ÿæˆå™¨
- ä»“å‚¨ç”Ÿæˆå™¨

**ç¤ºä¾‹**:

```bash
nx g @hl8/hybrid-archi:entity User --aggregate
nx g @hl8/hybrid-archi:value-object Email
nx g @hl8/hybrid-archi:use-case CreateUser
```

#### 10.3.2 é…ç½® API æ–‡æ¡£ç”Ÿæˆ

**å»ºè®®å·¥å…·**:

- TypeDoc
- Compodoc (for NestJS)

**é…ç½®**:

```json
{
  "scripts": {
    "docs:generate": "typedoc --out docs/api src/index.ts",
    "docs:serve": "npx http-server docs/api"
  }
}
```

#### 10.3.3 é…ç½® CI/CD æ£€æŸ¥

**å»ºè®®æ£€æŸ¥**:

- Lint æ£€æŸ¥
- ç±»å‹æ£€æŸ¥
- å•å…ƒæµ‹è¯•
- é›†æˆæµ‹è¯•
- è¦†ç›–ç‡æ£€æŸ¥
- æ„å»ºæ£€æŸ¥

### 10.4 æµç¨‹æ”¹è¿›

#### 10.4.1 å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹

**æ£€æŸ¥æ¸…å•**:

- [ ] æ˜¯å¦éµå¾ª hybrid-archi æ¨¡å¼
- [ ] æ˜¯å¦æœ‰å®Œæ•´çš„ TSDoc æ³¨é‡Š
- [ ] æ˜¯å¦æœ‰å•å…ƒæµ‹è¯•
- [ ] æ˜¯å¦ç¬¦åˆå‘½åè§„èŒƒ
- [ ] æ˜¯å¦é¿å…ç¡¬ç¼–ç 
- [ ] æ˜¯å¦ç¬¦åˆ TypeScript è§„èŒƒ

#### 10.4.2 å»ºç«‹å‘å¸ƒæµç¨‹

**å‘å¸ƒæ­¥éª¤**:

1. ç‰ˆæœ¬å·æ›´æ–°
2. æ›´æ–°æ—¥å¿—ç”Ÿæˆ
3. æ„å»ºæµ‹è¯•
4. æ–‡æ¡£ç”Ÿæˆ
5. å‘å¸ƒåŒ…
6. æ ‡è®°ç‰ˆæœ¬

---

## 11. ä¼˜å…ˆçº§å»ºè®®

### 11.1 ç«‹å³æ‰§è¡Œ (ğŸ”´ é«˜ä¼˜å…ˆçº§)

1. **é‡å†™ README.md**
   - æ—¶é—´ä¼°ç®—: 2-3 å¤©
   - å½±å“: ç›´æ¥æå‡æ¨¡å—å¯ç”¨æ€§
   - å»ºè®®è´Ÿè´£äºº: æ¶æ„å¸ˆ

2. **åˆ›å»ºå®Œæ•´ç¤ºä¾‹**
   - æ—¶é—´ä¼°ç®—: 3-5 å¤©
   - å½±å“: å¸®åŠ©å¼€å‘è€…ç†è§£ä½¿ç”¨
   - å»ºè®®è´Ÿè´£äºº: é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆ

3. **è¿è¡Œæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š**
   - æ—¶é—´ä¼°ç®—: 1 å¤©
   - å½±å“: äº†è§£ä»£ç è´¨é‡ç°çŠ¶
   - å»ºè®®è´Ÿè´£äºº: æµ‹è¯•å·¥ç¨‹å¸ˆ

### 11.2 è¿‘æœŸæ‰§è¡Œ (ğŸŸ¡ ä¸­ä¼˜å…ˆçº§)

1. **åˆ›å»ºæ¶æ„è®¾è®¡æ–‡æ¡£**
   - æ—¶é—´ä¼°ç®—: 5-7 å¤©
   - å½±å“: æå‡æ¶æ„ç†è§£å’Œç»´æŠ¤æ€§
   - å»ºè®®è´Ÿè´£äºº: æ¶æ„å¸ˆ

2. **è¡¥å……ç¼ºå¤±çš„æµ‹è¯•**
   - æ—¶é—´ä¼°ç®—: 7-10 å¤©
   - å½±å“: æé«˜ä»£ç è´¨é‡å’Œç¨³å®šæ€§
   - å»ºè®®è´Ÿè´£äºº: æµ‹è¯•å·¥ç¨‹å¸ˆ

3. **åˆ›å»ºä½¿ç”¨æŒ‡å—**
   - æ—¶é—´ä¼°ç®—: 5-7 å¤©
   - å½±å“: é™ä½ä½¿ç”¨é—¨æ§›
   - å»ºè®®è´Ÿè´£äºº: æŠ€æœ¯æ–‡æ¡£å·¥ç¨‹å¸ˆ

### 11.3 é•¿æœŸè§„åˆ’ (ğŸŸ¢ ä½ä¼˜å…ˆçº§)

1. **é…ç½®ä»£ç ç”Ÿæˆå™¨**
   - æ—¶é—´ä¼°ç®—: 10-15 å¤©
   - å½±å“: æå‡å¼€å‘æ•ˆç‡
   - å»ºè®®è´Ÿè´£äºº: å·¥å…·å¼€å‘å·¥ç¨‹å¸ˆ

2. **æ€§èƒ½ä¼˜åŒ–**
   - æ—¶é—´ä¼°ç®—: æŒç»­è¿›è¡Œ
   - å½±å“: æå‡ç³»ç»Ÿæ€§èƒ½
   - å»ºè®®è´Ÿè´£äºº: æ€§èƒ½ä¼˜åŒ–å·¥ç¨‹å¸ˆ

3. **API æ–‡æ¡£è‡ªåŠ¨åŒ–**
   - æ—¶é—´ä¼°ç®—: 3-5 å¤©
   - å½±å“: æå‡æ–‡æ¡£ç»´æŠ¤æ•ˆç‡
   - å»ºè®®è´Ÿè´£äºº: DevOps å·¥ç¨‹å¸ˆ

---

## 12. æ€»ç»“

### 12.1 æ€»ä½“è¯„ä»·

`hybrid-archi` æ¨¡å—æ˜¯ä¸€ä¸ª**æ¶æ„è®¾è®¡ä¼˜ç§€ã€ä»£ç è´¨é‡é«˜ã€ç±»å‹å®‰å…¨å¼º**çš„æ ¸å¿ƒæ¶æ„åŸºç¡€æ¨¡å—ã€‚

> ğŸ¯ **æ ¸å¿ƒä»·å€¼**ï¼šä½œä¸ºæ•´ä¸ª SAAS å¹³å°çš„æ¶æ„åŸºçŸ³ï¼Œhybrid-archi ä¸ºæ‰€æœ‰ä¸šåŠ¡æ¨¡å—æä¾›äº†ç»Ÿä¸€çš„æ··åˆæ¶æ„è®¾è®¡æ¨¡å¼å’Œå®Œæ•´çš„é€šç”¨åŠŸèƒ½ç»„ä»¶ï¼Œç¡®ä¿äº†å¹³å°çš„æ¶æ„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

å®ƒæˆåŠŸå®ç°äº† Clean Architecture + DDD + CQRS + Event Sourcing + Event-Driven Architecture çš„æ··åˆæ¶æ„æ¨¡å¼ï¼Œä¸ºä¸šåŠ¡æ¨¡å—å¼€å‘æä¾›äº†åšå®çš„åŸºç¡€ã€‚

**ä¼˜åŠ¿**:

- âœ… æ¶æ„è®¾è®¡å®Œæ•´ã€æ¸…æ™°
- âœ… ä»£ç è´¨é‡é«˜ã€ç±»å‹å®‰å…¨
- âœ… æ³¨é‡Šè§„èŒƒã€ä¸šåŠ¡è§„åˆ™æ¸…æ™°
- âœ… æµ‹è¯•ä½“ç³»å®Œå–„
- âœ… å¤šç§Ÿæˆ·æ”¯æŒå®Œå–„

**ä¸è¶³**:

- âš ï¸ æ–‡æ¡£ä¸å®Œæ•´
- âš ï¸ ç¼ºå°‘ä½¿ç”¨ç¤ºä¾‹
- âš ï¸ éƒ¨åˆ†åŠŸèƒ½æœªéªŒè¯
- âš ï¸ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ä¸æ˜ç¡®

### 12.2 æ”¹è¿›è·¯çº¿å›¾

**ç¬¬ä¸€é˜¶æ®µ (1-2 å‘¨)**:

1. é‡å†™ README.md
2. åˆ›å»ºå®Œæ•´ç¤ºä¾‹
3. è¿è¡Œæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

**ç¬¬äºŒé˜¶æ®µ (3-4 å‘¨)**:

1. åˆ›å»ºæ¶æ„è®¾è®¡æ–‡æ¡£
2. è¡¥å……ç¼ºå¤±çš„æµ‹è¯•
3. åˆ›å»ºä½¿ç”¨æŒ‡å—

**ç¬¬ä¸‰é˜¶æ®µ (æŒç»­)**:

1. é…ç½®ä»£ç ç”Ÿæˆå™¨
2. æ€§èƒ½ä¼˜åŒ–
3. API æ–‡æ¡£è‡ªåŠ¨åŒ–

### 12.3 æœ€ç»ˆå»ºè®®

1. **ä¼˜å…ˆæ”¹è¿›æ–‡æ¡£**: è¿™æ˜¯å½“å‰æœ€å¤§çš„çŸ­æ¿
2. **è¡¥å……ç¤ºä¾‹ä»£ç **: å¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹
3. **éªŒè¯åŠŸèƒ½å®Œæ•´æ€§**: ç¡®ä¿æ‰€æœ‰åŠŸèƒ½éƒ½ç»è¿‡æµ‹è¯•
4. **å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹**: ä¿æŒä»£ç è´¨é‡
5. **æŒç»­ä¼˜åŒ–æ€§èƒ½**: æå‡ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-01-27  
**è¯„ä¼°å·¥å…·**: AI åŠ©æ‰‹  
**è¯„ä¼°èŒƒå›´**: packages/hybrid-archi æ¨¡å—  
**è¯„ä¼°ç‰ˆæœ¬**: 0.0.1

---

## é™„å½•

### A. æ£€æŸ¥æ¸…å•

```markdown
## æ¶æ„æ£€æŸ¥

- [x] éµå¾ª Clean Architecture
- [x] å®ç° DDD æ ¸å¿ƒæ¦‚å¿µ
- [x] æ”¯æŒ CQRS
- [x] æ”¯æŒ Event Sourcing
- [x] æ”¯æŒ Event-Driven Architecture
- [x] æ”¯æŒå¤šç§Ÿæˆ·

## ä»£ç è´¨é‡æ£€æŸ¥

- [x] TypeScript ä¸¥æ ¼æ¨¡å¼
- [x] TSDoc æ³¨é‡Šè§„èŒƒ
- [x] å¸¸é‡ç®¡ç†
- [x] å‘½åè§„èŒƒ
- [x] é¿å…ç¡¬ç¼–ç 
- [x] ç±»å‹å®‰å…¨

## æµ‹è¯•æ£€æŸ¥

- [x] å•å…ƒæµ‹è¯•
- [x] é›†æˆæµ‹è¯•
- [x] E2E æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡ >= 80%

## æ–‡æ¡£æ£€æŸ¥

- [ ] README å®Œæ•´
- [x] ä»£ç æ³¨é‡Šå®Œæ•´
- [x] æµ‹è¯•æ–‡æ¡£å®Œæ•´
- [ ] æ¶æ„æ–‡æ¡£
- [ ] ä½¿ç”¨æŒ‡å—
- [ ] ç¤ºä¾‹ä»£ç 

## åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥

- [x] é¢†åŸŸå±‚ç»„ä»¶
- [x] åº”ç”¨å±‚ç»„ä»¶
- [x] åŸºç¡€è®¾æ–½å±‚ç»„ä»¶
- [x] æ¥å£å±‚ç»„ä»¶
- [ ] æ‰€æœ‰é€‚é…å™¨å®ç°éªŒè¯
- [ ] æ‰€æœ‰å·¥å‚å®ç°éªŒè¯
```

### B. å‚è€ƒèµ„æº

**æ¶æ„æ¨¡å¼**:

- Clean Architecture - Robert C. Martin
- Domain-Driven Design - Eric Evans
- CQRS - Greg Young
- Event Sourcing - Martin Fowler

**TypeScript**:

- TypeScript Handbook
- TSDoc Specification

**NestJS**:

- NestJS Documentation
- NestJS Best Practices

**æµ‹è¯•**:

- Jest Documentation
- Testing Best Practices

---

**æŠ¥å‘Šç»“æŸ**
